import{a as A,b as P,c as T}from"./chunk-Z6AK2GEV.js";import{a as D}from"./chunk-2EMY2H7W.js";import{b as M}from"./chunk-D7C7R5DL.js";import{Ba as r,Da as s,Eb as L,Fb as S,Ha as u,I as x,Ia as b,Ja as h,K as v,Ka as f,M as a,S as p,Sa as k,_a as w,fb as n,g as C,gb as o,h as I,ma as l,p as B,q as _,rb as g,ta as $,ub as y}from"./chunk-UHKDLVDU.js";function F(e,c){e&1&&f(0,"app-client-info",1),e&2&&u("displayData",c)}function R(e,c){e&1&&f(0,"app-client-bucket",3),e&2&&u("bucket",c)}function O(e,c){if(e&1&&(b(0,"div"),n(1,"async"),r(2,R,1,1,"app-client-bucket",3),n(3,"async"),h()),e&2){let t,i=k();w("loading",o(1,3,i.combinedLoading$)),l(2),s((t=o(3,5,i.populatedBucket$))?2:-1,t)}}var j=(()=>{class e{set clientId(t){this.clientId$.next(t)}clientId$=new I;showBucket;clientsApi=p(M);bucketApi=p(P);productsApi=p(T);clientLoading$=new C(!0);bucketLoading$=new C(!0);productsLoading$=new C(!0);client$=this.clientId$.pipe(a(()=>this.clientLoading$.next(!0)),v(t=>this.clientsApi.getClient$(t)),a(()=>this.clientLoading$.next(!1)));bucket$=this.clientId$.pipe(a(()=>this.bucketLoading$.next(!0)),v(t=>this.bucketApi.getClientBucket$(t)),a(()=>this.bucketLoading$.next(!1)));products$=this.productsApi.allProducts$().pipe(a(()=>this.productsLoading$.next(!1)));populatedBucket$=_([this.bucket$,this.products$]).pipe(B(([t,i])=>L(t,i)),x(1));combinedLoading$=_([this.bucketLoading$,this.productsLoading$]).pipe(B(t=>t.some(Boolean)));static \u0275fac=function(i){return new(i||e)};static \u0275cmp=$({type:e,selectors:[["app-stream"]],inputs:{clientId:"clientId",showBucket:"showBucket"},decls:6,vars:8,consts:[[1,"max-w-screen-lg"],[3,"displayData"],[3,"loading"],[3,"bucket"]],template:function(i,m){if(i&1&&(b(0,"div",0)(1,"div"),n(2,"async"),r(3,F,1,1,"app-client-info",1),n(4,"async"),h(),r(5,O,4,7,"div",2),h()),i&2){let d;l(),w("loading",o(2,4,m.clientLoading$)),l(2),s((d=o(4,6,m.client$))?3:-1,d),l(2),s(m.showBucket?5:-1)}},dependencies:[y,D,A,g],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0})}return e})();function q(e,c){if(e&1&&(f(0,"app-stream",0),n(1,"async")),e&2){let t=k();u("clientId",c)("showBucket",o(1,2,t.showBucket$)??!1)}}var ce=(()=>{class e{counter$=p(S).clientId$;showBucket$=p(S).showBucket$;static \u0275fac=function(i){return new(i||e)};static \u0275cmp=$({type:e,selectors:[["app-stream-input-wrapper"]],decls:2,vars:3,consts:[[3,"clientId","showBucket"]],template:function(i,m){if(i&1&&(r(0,q,2,4,"app-stream",0),n(1,"async")),i&2){let d;s((d=o(1,1,m.counter$))?0:-1,d)}},dependencies:[y,j,g],encapsulation:2})}return e})();export{ce as StreamInputWrapperComponent};
