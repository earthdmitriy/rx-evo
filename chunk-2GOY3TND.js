import{a as f,b as T}from"./chunk-K2KTMQ6H.js";import{a as P}from"./chunk-XFDKH5E3.js";import{b as D}from"./chunk-MC5SZHMA.js";import{a as x,b as R,c as q}from"./chunk-Z6AK2GEV.js";import{a as A}from"./chunk-2EMY2H7W.js";import{b as M}from"./chunk-D7C7R5DL.js";import{Ba as a,Da as c,Eb as $,Fb as h,Ha as m,Ia as g,Ja as u,Ka as l,S as p,Sa as C,_a as _,fb as v,g as S,gb as b,ib as y,ma as r,mb as k,rb as w,ta as s,ub as I,w as B}from"./chunk-UHKDLVDU.js";function j(e,i){e&1&&l(0,"app-generic-error",1)}function N(e,i){e&1&&l(0,"app-client-info",2),e&2&&m("displayData",i)}function W(e,i){e&1&&l(0,"app-generic-error",4)}function O(e,i){e&1&&l(0,"app-client-bucket",5),e&2&&m("bucket",i)}function G(e,i){if(e&1&&(g(0,"div"),a(1,W,1,0,"app-generic-error",4),a(2,O,1,1,"app-client-bucket",5),u()),e&2){let t,n=C();_("loading",n.combined.loading()),r(),c(n.combined.error()?1:-1),r(),c((t=n.combinedData())?2:-1,t)}}var E=(()=>{class e{clientId=k();showBucket=k();clientId$=D(this.clientId).pipe(B(Boolean));clientsApi=p(M);bucketApi=p(R);productsApi=p(q);productsRequest=f(new S(!0),()=>this.productsApi.allProducts$(),t=>t);clientRequest=f(this.clientId$,t=>this.clientsApi.getClient$(t),t=>t).toSignal();bucketRequest=f(this.clientId$,t=>this.bucketApi.getClientBucket$(t),t=>t);combined=T([this.bucketRequest,this.productsRequest]).toSignal();combinedData=y(()=>{let t=this.combined.data();if(!t)return null;let[n,o]=t;return $(n,o)});static \u0275fac=function(n){return new(n||e)};static \u0275cmp=s({type:e,selectors:[["app-container-signal"]],inputs:{clientId:[1,"clientId"],showBucket:[1,"showBucket"]},decls:5,vars:5,consts:[[1,"max-w-screen-lg"],["text","Failed to load client"],[3,"displayData"],[3,"loading"],["text","Failed to load bucket"],[3,"bucket"]],template:function(n,o){if(n&1&&(g(0,"div",0)(1,"div"),a(2,j,1,0,"app-generic-error",1),a(3,N,1,1,"app-client-info",2),u(),a(4,G,3,4,"div",3),u()),n&2){let d;r(),_("loading",o.clientRequest.loading()),r(),c(o.clientRequest.error()?2:-1),r(),c((d=o.clientRequest.data())?3:-1,d),r(),c(o.showBucket()?4:-1)}},dependencies:[A,x,P],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0})}return e})();function z(e,i){if(e&1&&(l(0,"app-container-signal",0),v(1,"async")),e&2){let t=C();m("clientId",i)("showBucket",b(1,2,t.showBucket$)??!1)}}var de=(()=>{class e{counter$=p(h).clientId$;showBucket$=p(h).showBucket$;static \u0275fac=function(n){return new(n||e)};static \u0275cmp=s({type:e,selectors:[["app-signal-input-wrapper"]],decls:2,vars:3,consts:[[3,"clientId","showBucket"]],template:function(n,o){if(n&1&&(a(0,z,2,4,"app-container-signal",0),v(1,"async")),n&2){let d;c((d=b(1,1,o.counter$))?0:-1,d)}},dependencies:[I,E,w],encapsulation:2})}return e})();export{de as ContainerSignalInputWrapperComponent};
