import{a as te}from"./chunk-DMFARG3C.js";import{a as ie}from"./chunk-IX3H5HXJ.js";import{a as Y,b as Z,c as ee}from"./chunk-ZSEMYRIX.js";import{a as X}from"./chunk-XFDKH5E3.js";import{c as z,d as L,g as O,h as K,i as W,j as q,k as H,l as J,m as Q}from"./chunk-EAS7AI6F.js";import{b as U}from"./chunk-D7C7R5DL.js";import{$a as r,Ba as g,C as $,Ca as F,Da as f,Fa as D,Ga as I,Ha as c,I as T,Ia as t,J as N,Ja as n,K as B,Oa as h,Qa as x,S as b,Sa as _,V as v,W as C,_a as M,ab as w,bb as y,f as P,fb as s,gb as u,hb as A,ma as l,p as E,q as V,rb as R,sb as G,ta as k,ub as j}from"./chunk-UHKDLVDU.js";var ne=(i,m)=>m.clientId;function ae(i,m){if(i&1){let e=h();t(0,"tbody")(1,"tr")(2,"td",10)(3,"app-generic-error",11),x("reload",function(){v(e);let o=_();return C(o.stream.reload())}),n()()()()}i&2&&(l(3),c("showReload",!0))}function oe(i,m){if(i&1&&(t(0,"tr")(1,"td",13),r(2),n(),t(3,"td",14),r(4),n(),t(5,"td",14),r(6),s(7,"date"),n()()),i&2){let e=m.$implicit;l(2),y(" ",e.name," "),l(2),y(" ",e.email," "),l(2),y(" ",A(7,3,e.registeredAt,"medium")," ")}}function re(i,m){i&1&&(t(0,"tr")(1,"td",15),r(2," No results "),n()())}function le(i,m){if(i&1&&(t(0,"tbody",12),D(1,oe,8,6,"tr",null,ne),g(3,re,3,0,"tr"),n()),i&2){let e=m;l(),I(e.data),l(2),f(e.data.length?-1:3)}}function pe(i,m){if(i&1&&(g(0,le,4,1,"tbody",12),s(1,"async")),i&2){let e,a=_();f((e=u(1,1,a.stream.value$))?0:-1,e)}}function me(i,m){if(i&1){let e=h();t(0,"div",9)(1,"div",16)(2,"button",17),x("click",function(){let o=v(e),p=_();return C(p.prevPage(o))}),r(3," Prev "),n(),t(4,"button",17),s(5,"async"),x("click",function(){let o=v(e),p=_();return C(p.nextPage(o))}),r(6," Next "),n()(),t(7,"div",18)(8,"div",19),r(9," Page: "),t(10,"span",20),r(11),n()(),t(12,"label",19),r(13,"Page size "),t(14,"select",21)(15,"option",22),r(16,"5"),n(),t(17,"option",22),r(18,"10"),n(),t(19,"option",22),r(20,"20"),n()()(),t(21,"div",19),r(22," Total pages: "),t(23,"span",20),r(24),s(25,"async"),n()()()()}if(i&2){let e,a,o=m,p=_();c("formGroup",o),l(2),c("disabled",o.value.page===1),l(2),c("disabled",o.value.page===((e=u(5,8,p.stream.value$))==null?null:e.totalPages)),l(7),w(o.controls.page.value),l(4),c("value",5),l(2),c("value",10),l(2),c("value",20),l(5),w(((a=u(25,10,p.stream.value$))==null?null:a.totalPages)||0)}}var he=(()=>{class i{fb=b(J);clientApiService=b(U);formValue$=new P;pagination$=this.formValue$.pipe(E(()=>this.fb.group({page:this.fb.control(1),pageSize:this.fb.control(10)})),T(1));paginationValue$=this.pagination$.pipe(B(e=>e.valueChanges.pipe(N(e.value))));stream=ee({input:V([this.formValue$,this.paginationValue$]).pipe($(0)),loader:([{name:e,email:a,registeredAfter:o,registeredBefore:p},{page:d,pageSize:S}])=>this.clientApiService.searchClientsPaged$({name:e,email:a,registeredBefore:p?new Date(p):void 0,registeredAfter:o?new Date(o):void 0,page:d,pageSize:S}),cacheKey:([{name:e,email:a,registeredAfter:o,registeredBefore:p},{page:d,pageSize:S}])=>[e,a,o,p,d,S]}).pipe(te({name:"PaginationComponent Stream",actionName:e=>Y(e)?"Loading...":Z(e)?"Error":"Value"}));prevPage(e){let a=e.controls.page.value||1;e.patchValue({page:Math.max(1,a-1)})}nextPage(e){let a=e.controls.page.value||1;e.patchValue({page:a+1})}static \u0275fac=function(a){return new(a||i)};static \u0275cmp=k({type:i,selectors:[["app-pagination"]],decls:22,vars:10,consts:[[1,"p-6"],[3,"formValue$"],[1,"bg-white","shadow","rounded","overflow-hidden"],[1,"p-4","border-b"],[1,"text-lg","font-medium"],[1,"overflow-x-auto"],[1,"min-w-full","divide-y","divide-gray-200"],[1,"bg-gray-50"],[1,"px-6","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"p-4","border-t","flex","items-center","justify-between",3,"formGroup"],["colspan","3"],[3,"reload","showReload"],[1,"bg-white","divide-y","divide-gray-200"],[1,"px-6","py-4","whitespace-nowrap","text-sm","text-gray-900"],[1,"px-6","py-4","whitespace-nowrap","text-sm","text-gray-500"],["colspan","3",1,"px-6","py-4","text-sm","text-gray-500"],[1,"flex","items-center","space-x-2"],[1,"px-3","py-1","bg-gray-100","rounded","disabled:opacity-50",3,"click","disabled"],[1,"flex","items-center","space-x-4"],[1,"text-sm","text-gray-600"],[1,"font-medium"],["formControlName","pageSize",1,"ml-2","rounded","border-gray-300"],[3,"value"]],template:function(a,o){if(a&1&&(t(0,"div",0)(1,"app-clients-filter-form",1),x("formValue$",function(d){return o.formValue$.next(d)}),n(),t(2,"div",2)(3,"div",3)(4,"h3",4),r(5,"Clients"),n()(),t(6,"div",5)(7,"table",6),s(8,"async"),t(9,"thead",7)(10,"tr")(11,"th",8),r(12," Name "),n(),t(13,"th",8),r(14," Email "),n(),t(15,"th",8),r(16," Registered "),n()()(),g(17,ae,4,1,"tbody"),s(18,"async"),F(19,pe,2,3),n()(),g(20,me,26,12,"div",9),s(21,"async"),n()()),a&2){let p,d;l(7),M("loading",u(8,4,o.stream.pending$)),l(10),f((p=u(18,6,o.stream.error$))?17:19,p),l(3),f((d=u(21,8,o.pagination$))?20:-1,d)}},dependencies:[j,Q,q,H,W,z,L,K,O,X,ie,R,G],encapsulation:2})}return i})();export{he as PaginationComponent};
