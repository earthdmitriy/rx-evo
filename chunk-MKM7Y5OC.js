import{a as L}from"./chunk-XFDKH5E3.js";import{d as R}from"./chunk-MC5SZHMA.js";import{a as T,b as N,c as F}from"./chunk-Z6AK2GEV.js";import{a as $}from"./chunk-2EMY2H7W.js";import{b as P}from"./chunk-D7C7R5DL.js";import{$a as k,Ba as c,Da as a,Eb as E,Fb as B,Ha as m,Ia as f,Ja as d,Ka as C,Oa as I,Qa as M,S as s,Sa as v,V as y,W as D,_a as h,fb as b,gb as w,ib as _,ma as l,mb as x,rb as S,ta as g,ub as A}from"./chunk-UHKDLVDU.js";var V={idle:0,resolved:1,local:2,error:3,loading:4,reloading:5},W=(e,n)=>{let t=_(()=>e.map(i=>i.error()).some(i=>i)),o=_(()=>{if(t())return;let i=e.map(u=>u.value());if(!i.some(u=>u===void 0))return n(i)}),r=_(()=>!!o()),p=_(()=>e.map(i=>i.status()).reduce((i,u)=>V[i]>V[u]?i:u,"idle")),G=()=>e.forEach(i=>i.reload());return{isLoading:_(()=>e.map(i=>i.isLoading()).some(i=>i)),error:t,value:o,hasValue:r,reload:G,status:p}};function q(e,n){if(e&1){let t=I();f(0,"app-generic-error",6),M("reload",function(){y(t);let r=v();return D(r.clientResource.reload())}),d()}e&2&&m("showReload",!0)}function z(e,n){e&1&&C(0,"app-client-info",2),e&2&&m("displayData",n)}function H(e,n){e&1&&C(0,"app-generic-error",7)}function J(e,n){e&1&&C(0,"app-client-bucket",8),e&2&&m("bucket",n)}function K(e,n){if(e&1&&(f(0,"div"),c(1,H,1,0,"app-generic-error",7),c(2,J,1,1,"app-client-bucket",8),d()),e&2){let t,o=v();h("loading",o.populatedBucketResource.isLoading()),l(),a(o.populatedBucketResource.error()?1:-1),l(),a((t=o.populatedBucketResource.value())?2:-1,t)}}var j=(()=>{class e{clientId=x();showBucket=x();clientsApi=s(P);bucketApi=s(N);productsApi=s(F);clientResource=R({params:this.clientId,stream:t=>this.clientsApi.getClient$(t.params)});productsResource=R({stream:()=>this.productsApi.allProducts$()});bucketResource=R({params:this.clientId,stream:t=>this.bucketApi.getClientBucket$(t.params)});populatedBucketResource=W([this.bucketResource,this.productsResource],([t,o])=>t&&o&&E(t,o));static \u0275fac=function(o){return new(o||e)};static \u0275cmp=g({type:e,selectors:[["app-resource"]],inputs:{clientId:[1,"clientId"],showBucket:[1,"showBucket"]},decls:10,vars:5,consts:[[1,"max-w-screen-lg"],["text","Failed to load client",3,"showReload"],[3,"displayData"],[3,"loading"],[1,"mt-4","px-4","py-2","bg-blue-600","text-white","rounded","hover:bg-blue-700"],[1,""],["text","Failed to load client",3,"reload","showReload"],["text","Failed to load bucket"],[3,"bucket"]],template:function(o,r){if(o&1&&(f(0,"div",0)(1,"div"),c(2,q,1,1,"app-generic-error",1),c(3,z,1,1,"app-client-info",2),d(),c(4,K,3,4,"div",3),d(),f(5,"div")(6,"button",4),k(7," Click me! "),d()(),f(8,"div",5),k(9,"Lorem ipsum dolor sit amet, consectetur adipiscing elit."),d()),o&2){let p;l(),h("loading",r.clientResource.isLoading()),l(),a(r.clientResource.error()?2:-1),l(),a((p=r.clientResource.value())?3:-1,p),l(),a(r.showBucket()?4:-1)}},dependencies:[$,T,L],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0})}return e})();function Q(e,n){if(e&1&&(C(0,"app-resource",0),b(1,"async")),e&2){let t=v();m("clientId",n)("showBucket",w(1,2,t.showBucket$)??!1)}}var ve=(()=>{class e{counter$=s(B).clientId$;showBucket$=s(B).showBucket$;static \u0275fac=function(o){return new(o||e)};static \u0275cmp=g({type:e,selectors:[["app-resource-input-wrapper"]],decls:2,vars:3,consts:[[3,"clientId","showBucket"]],template:function(o,r){if(o&1&&(c(0,Q,2,4,"app-resource",0),b(1,"async")),o&2){let p;a((p=w(1,1,r.counter$))?0:-1,p)}},dependencies:[A,j,S],encapsulation:2})}return e})();export{ve as ResourceInputWrapperComponent};
