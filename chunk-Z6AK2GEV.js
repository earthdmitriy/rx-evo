import{a as c}from"./chunk-D7C7R5DL.js";import{$a as n,Bb as l,Cb as u,Ea as S,Fa as C,Fb as x,Ga as D,Gb as k,La as o,Ma as i,P as E,S as d,bb as a,fb as f,gb as y,m as p,ma as m,mb as $,o as h,t as B,ta as P,tb as I,ub as K}from"./chunk-UHKDLVDU.js";function j(e,b){if(e&1&&(o(0,"tr",5)(1,"th",8),n(2),i(),o(3,"td",7),n(4),i(),o(5,"td",7),n(6),f(7,"currency"),i(),o(8,"td",7),n(9),i(),o(10,"td",7),n(11),f(12,"currency"),i()()),e&2){let t=b.$implicit;m(2),a(" ",t.product.name," "),m(2),a(" ",t.product.material," "),m(2),a(" ",y(7,5,t.product.price)," "),m(3),a(" ",t.amount," "),m(2),a(" ",y(12,7,+t.product.price*t.amount)," ")}}var z=(()=>{class e{bucket=$();static \u0275fac=function(r){return new(r||e)};static \u0275cmp=P({type:e,selectors:[["app-client-bucket"]],inputs:{bucket:[1,"bucket"]},decls:26,vars:3,consts:[[1,"px-6","py-4","text-lg","text-gray-800"],[1,"relative","overflow-x-auto"],[1,"w-full","text-sm","text-left","rtl:text-right","text-gray-500"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50"],["scope","col",1,"px-6","py-3"],[1,"bg-white","border-b"],["scope","row","colspan","4",1,"px-6","py-4","font-medium","text-gray-900","whitespace-nowrap"],[1,"px-6","py-4"],["scope","row",1,"px-6","py-4","font-medium","text-gray-900","whitespace-nowrap"]],template:function(r,s){if(r&1&&(o(0,"div")(1,"h2",0),n(2,"Bucket"),i(),o(3,"div",1)(4,"table",2)(5,"thead",3)(6,"tr")(7,"th",4),n(8,"Product name"),i(),o(9,"th",4),n(10,"Material"),i(),o(11,"th",4),n(12,"Price"),i(),o(13,"th",4),n(14,"Amount"),i(),o(15,"th",4),n(16,"Total price"),i()()(),o(17,"tbody"),C(18,j,13,9,"tr",5,S),o(20,"tr",5)(21,"th",6),n(22," Total "),i(),o(23,"td",7),n(24),f(25,"currency"),i()()()()()()),r&2){let v,w;m(18),D((v=s.bucket())==null?null:v.goods),m(6),a(" ",y(25,1,(w=s.bucket())==null?null:w.total)," ")}},dependencies:[K,I],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0})}return e})();var T=e=>({clientId:e,products:new Array(c.number.int({min:2,max:10})).fill(0).map(b=>({productId:c.number.int({min:2,max:1e3}),amount:c.number.int({min:1,max:10})}))}),Z=(()=>{class e{logKey="bucket";skipDelay=d(k);throwError$=d(x).throwBucketApiError$;cachedBuckets=new Array(1e3).fill(0).reduce((t,r,s)=>(t[s]=T(s),t),{});getClientBucket$(t){let r=this.cachedBuckets[t]??(this.cachedBuckets[t]=T(t));return p(r).pipe(l(this.skipDelay,this.logKey,t),u(this.throwError$))}getClientBucketProm(t){return h(this.getClientBucket$(t))}allBuckets$(){return p(Object.keys(this.cachedBuckets).map(t=>this.cachedBuckets[+t])).pipe(l(this.skipDelay,this.logKey),u(this.throwError$))}static \u0275fac=function(r){return new(r||e)};static \u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var F=e=>({productId:e,name:c.commerce.product(),descripton:c.commerce.productDescription(),material:c.commerce.productMaterial(),price:c.commerce.price()}),pt=(()=>{class e{logKey="product";skipDelay=d(k);throwError$=d(x).throwProductApiError$;cachedProducts=new Array(1e3).fill(0).map((t,r)=>F(r)).reduce((t,r)=>(t[r.productId]=r,t),{});getProduct$(t){let r=this.cachedProducts[t]??(this.cachedProducts[t]={productId:t,name:c.commerce.product(),descripton:c.commerce.productDescription(),material:c.commerce.productMaterial(),price:c.commerce.price()});return p(r).pipe(l(this.skipDelay,this.logKey,t),u(this.throwError$))}getProducts$(t){return B(t.map(r=>this.getProduct$(r)))}allProducts$(){return p(Object.keys(this.cachedProducts).map(t=>this.cachedProducts[+t])).pipe(l(this.skipDelay,this.logKey),u(this.throwError$))}allProductsProm(){return h(this.allProducts$())}static \u0275fac=function(r){return new(r||e)};static \u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();export{z as a,Z as b,pt as c};
